"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28409],{23260:(e,t,r)=>{r.d(t,{kp:()=>m,vZ:()=>d});var n=r(1251),i=r(22215),o=r(51049),a=r(53239),l=r(12514),c=r(7375),u=r(56314),s=r(46660),p=r(28883),f=r(34006);function d(e){return{useAtomChat:function(){var t=(0,n.Xr)(e),r=(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>e,(e,t)=>(0,l.A)(e,t,(e,t,r)=>{if("convs"===r&&(0,c.A)(e)&&(0,c.A)(t))return e.length===t.length})),[]));return(0,a.useMemo)(()=>[r,t],[r,t])},useSetAtomChatWithCallback:function(){var[,t]=function(e){var[t,r]=(0,n.fp)(e),i=(0,a.useRef)([]),o=(0,a.useCallback)((e,t)=>{t&&i.current.push(t),r(e)},[r]);return(0,a.useEffect)(()=>{i.current.length>0&&(i.current.forEach(e=>e(t)),i.current=[])},[t]),[t,o]}(e);return t},useSelectAtomChat:function(t,r){return(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>t(e),u.A),r||[]))},useAtomChatInfo:function(){return(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>e?(0,s.A)(e,["convs","aiSpeakingState"]):null,u.A),[]))},useAtomChatStatus:function(){return(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>e?(0,p.A)(e,["aiSpeakingState"]):null,u.A),[]))},useAtomChatList:function(){return(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>null==e?void 0:e.convs,(e,t)=>{var r,n;return!!e&&!!t&&e.length===t.length&&(null==(r=e[0])?void 0:r.conversationId)===(null==(n=t[0])?void 0:n.conversationId)}),[]))},useAtomChatListLength:function(){return(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>{var t;return(null==e||null==(t=e.convs)?void 0:t.length)||0}),[]))},useAtomChatRealtimeItem:function(t){return(0,n.md)((0,a.useMemo)(()=>(0,o.mg)(e,e=>e&&void 0!==t?e.convs[t]:null,(e,t)=>{var r;return!!e&&!!t&&("human"===e.speaker&&(null==(r=e.speechesV2)||null==(r=r[0])?void 0:r.speechType)===f.Fm.TEXT?(0,u.A)(e,t):e===t)}),[]))}}}function m(e){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.zp)();return t.get(e)}return{getAtomChat:t,updateAtomChat:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.zp)();r.set(e,t)},getAtomChatList:function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.zp)();return null==(t=r.get(e))?void 0:t.convs},getAtomChatItem:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.zp)(),n=t(r);return n?n.convs[e]:null}}}},34006:(e,t,r)=>{r.d(t,{Fm:()=>n,Gz:()=>o,LJ:()=>l,Tb:()=>p,Wf:()=>s,dZ:()=>u,di:()=>a,iH:()=>i,pn:()=>c});var n=function(e){return e.STEP="step",e.IMAGE_WITH_3D="image_with_3d",e.VIDEO_ASSET="video_asset",e.IMAGE_WITH_TEXT="image_with_text",e.SEARCH_WITH_IMAGE="search_with_image",e.DRAW_WITH_IMAGE="draw_with_search",e.TEXT="text",e.FIGURE_TO_VIDEO="figure-to-video",e.IMAGE_GROUP="image-group",e.GOODS_WITH_TEXT="goods_with_text",e.LOCAL_MOCK_LOADING="local_mock_loading",e.SENSITIVE_HIDE="SENSITIVE_HIDE",e.ERROR="error",e.MULTI_MODAL="multimodal",e.PDF_CONTENT_PARSE="pdf_content_parse",e.MESSAGE_REVOKE="message_revoke",e.THIRD_PLUGIN="third_plugin",e.STATUS="status",e.TIPS="tips",e.CARD="card",e.NEWS="news",e.NEWS_ARTICLE="news_article",e.NEWS_AND_NEWS_ARTICLE="news_and_news_article",e.SEARCH_WITH_TEXT="search_with_text",e.SCENARIO_CHALLENGE="scenario_challenge",e.SEARCH_DEEP_MODE="ai_search_pro",e.SEARCH_DEEP_MODE_FIN="ai_search_pro_fin",e.YUANQI_TOOL_CALL="yuanqi_tool_call",e.DOC_DEEP_MODE="doc_deep_mode",e.DOC_DEEP_READING="doc_deep_reading",e.DOC_DEEP_READ_CARD="docDeepReadCard",e.OLYMPIC_POSTER="olympic_poster",e.OUTLINE="writingOutline",e.DOC_LINK="writingDocLink",e.DOC_CARD="writingDocCard",e.SUB_SESSION="sub_session",e.DEEP_THINK="deep_think",e.REASONER="reasoner",e.DEEP_SEARCH_COT="deep_search",e.MEETING_BOT="meeting_bot",e.AI_TASK_BOT="ai_task_bot",e.ACCESS="access",e.DELETE_MSG="delete_msg",e.HINT_V2="hint_v2",e.HINT_V2_TIP="hint_v2_tip",e.VOICE_RECORDER="voice_recorder",e.DEEP_THINK_BOX="deep_think_box",e}({}),i=function(e){return e.SPEAKING="speaking",e.STOPPING="stopping",e.SPLIT="split",e.UPLOADING="uploding",e.PARSING="parsing",e}({}),o=function(e){return e[e.NORMAL=0]="NORMAL",e[e.READING=1]="READING",e[e.TRANSLATION=2]="TRANSLATION",e[e.SUMMARY=3]="SUMMARY",e[e.GUIDE=4]="GUIDE",e[e.DEEP_SEARCH=5]="DEEP_SEARCH",e}({}),a=function(e){return e[e.NORMAL=1]="NORMAL",e[e.INSPIRATION=2]="INSPIRATION",e}({}),l=function(e){return e.KNOWLEDGE="knowledge",e.PLUGIN="function",e.WORKFLOW="workflow",e}({}),c=function(e){return e.RUNNING="running",e.SUCCESS="success",e.ERROR="error",e}({}),u=function(e){return e.AI_SEARCH_LIGHT="ai_search_light",e.AI_SEARCH_PRO="ai_search_pro",e.YUAN_QI="yuanqi",e.AI_WRITING="ai_writing",e.DEFAULT="default",e.AI_SEARCH_DEEPSEEK="ai_search_deepseek",e.AI_SEARCH_TEXT_2_IMAGE="ai_search_text_2_image",e.AI_SEARCH_IMAGE_2_IMAGE="ai_search_image_2_image",e.AI_SEARCH_IMAGE_2_VIDEO="ai_search_image_2_video",e}({}),s=function(e){return e[e.link=1]="link",e[e.code=2]="code",e[e.draw=3]="draw",e[e.search=4]="search",e[e.calling=5]="calling",e[e.running=6]="running",e[e.calldone=7]="calldone",e[e.thinking=9]="thinking",e}({}),p=function(e){return e.doc="doc",e.summary="summary",e.deepRead="deepRead",e.translate="translate",e.mindMap="mindMap",e}({})},35733:(e,t,r)=>{r.d(t,{H7:()=>o,T0:()=>i,Vg:()=>l,e$:()=>n,mh:()=>a,yP:()=>c});var n=["jpg","jpeg","png","gif","bmp","webp"],i=["text","txt","pdf","doc","docx","pptx","xls","xlsx","csv","ppt","excel","slide","sheet","form","mind","smartcanvas"],o=50,a=10,l=function(e){return e.IMAGE="image",e.PDF="pdf",e.TENCENT_DOC="tencentDoc",e}({}),c=["bat","c","cpp","cs","css","go","h","hpp","html","ini","java","js","json","log","lua","md","php","pl","py","rb","sh","sql","swift","tex","toml","vue","xml","yaml","yml"]},47969:(e,t,r)=>{r.d(t,{P:()=>i,g:()=>n});var n="input_toolbar_popup_panel",i="chat-input-model-selector-tag"},61639:(e,t,r)=>{r.d(t,{JK:()=>c,LC:()=>s,pC:()=>p,yC:()=>d});var n=r(85391),i=r(74476),o=r(73697);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function c(e){return null!=e&&e.includes(i.lP)?i.lP:null!=e&&e.includes(i.dI)?i.dI:null!=e&&e.includes(i._1)?i._1:""}var u=()=>{var{userId:e}={userId:window.localStorage.getItem("X-ID")};return"".concat(e,"_chatModelExtInfo")};i.VP,i.Ng;var s=e=>{if((0,n.I)("saveChatModelExtInfoToCache",{chatModelExtInfo:e}),f()&&[o.G_.autoKnowledgeSearch,o.G_.closeKnowledgeSearch].includes(e.supportFunctions.internetSearch)){e.supportFunctions.projectInternetSearch=e.supportFunctions.internetSearch;var t,r=p(!0);r&&(e.supportFunctions.internetSearch=null!=(t=r.supportFunctions.internetSearch)?t:o.G_.closeInternetSearch)}else e.supportFunctions.projectInternetSearch&&(e.supportFunctions.projectInternetSearch="");return localStorage.setItem(u(),JSON.stringify(e)),e},p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(void 0===window.localStorage)return null;var t=localStorage.getItem(u());if((0,n.I)("getChatModelExtInfoFromCache",{chatModelExtInfo:t}),t){var r,i,o=JSON.parse(t);return f()&&!e?((i=l({},(null==(r=o)?void 0:r.supportFunctions)||{})).projectInternetSearch&&(i.internetSearch=i.projectInternetSearch),"autoInternetSearch"===i.internetSearch&&(i.internetSearch="openInternetSearch"),l(l({},r),{},{supportFunctions:i})):o}return null};function f(){try{var e=new URL(window.location.href);if(e.searchParams.get("project_id")||e.searchParams.get("projectId"))return!0;var t=e.pathname||"";if(t.startsWith("/chat/project"))return!0;return t.startsWith("/project")}catch(e){return!1}}var d=(e,t,r,i)=>{var o,a=function(e){var{modelId:t,modelList:r}=e;if(!t||!(null!=r&&r.length))return null;var n=r.find(e=>e.chatModelId===t);if(n)return{currentModel:n,hierarchy:{model:n,subModel:null}};for(var i of r){var{subModelList:o}=i;if(null!=o&&o.length){var a=o.find(e=>e.chatModelId===t);if(a)return{currentModel:a,hierarchy:{model:i,subModel:a}}}}return null}({modelId:e,modelList:null==t?void 0:t.modelList});return a?{cid:r,chatModelId:e,chatModelExtInfo:{modelId:null==a?void 0:a.hierarchy.model.chatModelId,subModelId:(null==a||null==(o=a.hierarchy.subModel)?void 0:o.chatModelId)||"",supportFunctions:{internetSearch:(null==i?void 0:i.internetSearch)||""}},projectId:"",isInProjectPage:!1}:((0,n.I)("formatParams selectedModelHierarchy is null",{currChatModelId:e,modelListData:t}),null)}},73697:(e,t,r)=>{r.d(t,{_Q:()=>n._,PS:()=>n._,XC:()=>u,xR:()=>a,Vg:()=>o.Vg,gt:()=>i.g,DL:()=>d,Qx:()=>f,ON:()=>s,G_:()=>p,ao:()=>l,eV:()=>c});var n=r(95830),i=r(47969),o=r(35733),a=function(e){return e[e.APPLICATION_LIST=0]="APPLICATION_LIST",e}({}),l={applicationList:e=>["chat-input",a.APPLICATION_LIST,e]},c=function(e){return e[e.Button=0]="Button",e[e.Enter=1]="Enter",e[e.Sug=2]="Sug",e}({}),u="searchbar-editor",s={auto:"auto",manual:"manual",knowledge:"knowledge"},p={autoInternetSearch:"autoInternetSearch",openInternetSearch:"openInternetSearch",closeInternetSearch:"closeInternetSearch",supportInternetSearch:"supportInternetSearch",autoKnowledgeSearch:"autoKnowledgeSearch",closeKnowledgeSearch:"closeKnowledgeSearch"},f=[{label:"\u81EA\u52A8",value:"auto",desc:"\u81EA\u52A8\u5224\u65AD\u662F\u5426\u8054\u7F51"},{label:"\u624B\u52A8",value:"manual",desc:"\u624B\u52A8\u63A7\u5236\u8054\u7F51\u72B6\u6001"}],d=[{label:"\u57FA\u4E8E\u8D44\u6599",value:"knowledge",desc:"\u57FA\u4E8E\u60A8\u4E0A\u4F20\u7684\u6587\u4EF6\u56DE\u7B54"},{label:"\u8054\u7F51\u641C\u7D22",value:"manual",desc:"\u57FA\u4E8E\u8054\u7F51\u641C\u7D22\u7684\u4FE1\u606F\u56DE\u7B54"}]},74476:(e,t,r)=>{r.d(t,{Ng:()=>o,VP:()=>n,_1:()=>c,dI:()=>a,ht:()=>i,lP:()=>l});var n="hunyuan_gpt_175B_0404",i="deep_seek_v3",o="hunyuan_t1",a="hunyuan",l="deep_seek",c="gpt_oss"},84724:(e,t,r)=>{r.d(t,{z:()=>n});function n(e){var t;return{traceID:e.traceID,traceId:e.traceID,chatModelId:e.chatModelId,pluginId:e.pluginId,respFeProps:e.feProps,aiSpeakingState:e.aiSpeakingState,stepChunks:null==e||null==(t=e.content)?void 0:t.filter(e=>"step"===e.type&&1===e.stepVersion&&e.enableStageLayer)}}},85391:(e,t,r)=>{r.d(t,{I:()=>o});var n=r(90923),i=r(60767),o=(e,t)=>{(0,n.h)("searchBarLog ".concat(e,", ").concat(JSON.stringify(t))),(0,i.Vt)("searchBar__".concat(e),t)}},87100:(e,t,r)=>{r.d(t,{Wn:()=>P,iH:()=>n.iH,OR:()=>y,fq:()=>g,di:()=>n.di,Tb:()=>n.Tb,Wf:()=>n.Wf,py:()=>Q,Gz:()=>n.Gz,Fm:()=>n.Fm,dZ:()=>n.dZ,pn:()=>n.pn,LJ:()=>n.LJ,Uo:()=>i,Vs:()=>ei,xd:()=>em,dP:()=>es,VW:()=>et,$c:()=>S,PR:()=>ed,$v:()=>C,hR:()=>J,v_:()=>N,GA:()=>en,xm:()=>p,Xt:()=>U,WR:()=>V,P0:()=>K,ae:()=>m,lc:()=>x,Q9:()=>O,l7:()=>H,Dv:()=>Z});var n=r(34006),i=function(e){return e.channelsVideo="channelsVideo",e.knowledgeBase="knowledge_base",e.plugin="plugin",e.mp="mp",e.book="book",e.paper="paper",e.weread="weread",e}({}),o=r(51498),a=r(20667),l=r(84724),c=r(80828);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var p=function(e){var t,r,n,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extra:p}=e,f=e.content||[],{isLoading:d=!1}=u,m=s({type:"card",searchTitle:"",searchRefList:[],textMsg:"",showEmptyMsg:!1,cardTitle:"",cardSource:{name:"",icon:""},cardList:[],hitDeepMode:!1,promptHint:(null==(t=e.extra)?void 0:t.promptHint)||[],replaceList:[],searchTopic:"",writingInfo:void 0,topPushedAiTaskCard:null==(r=(0,c.is)(f))?void 0:r[0]},(0,l.z)(e)),y=f.filter(e=>"text"===e.type).reduce((e,t)=>e.concat(t.msg||""),"");m.textMsg=y?(0,o.H)(y):d?"":a.a,m.showEmptyMsg=!y;var g=f.filter(e=>"searchGuid"===e.type);if(g.length>0){var v=g[g.length-1];m.searchTitle=v.title,m.searchRefList=v.docs,m.citations=v.citations,m.hitDeepMode=v.hitDeepMode,m.searchTopic=v.topic}var b=f.filter(e=>"card"===e.type);if(b.length>0){var h=b[b.length-1];m.cardList=h.cardList||[],m.cardTitle=h.title||"\u76F8\u5173\u5185\u5BB9",m.cardSource=h.xSource}return null!=(n=e.extra)&&n.replaces&&(m.replaceList=e.extra.replaces||[]),null!=(i=e.extra)&&i.marks&&(m.markList=e.extra.marks||[]),null!=p&&p.writingInfo&&(m.writingInfo=p.writingInfo),s(s({},m),(0,l.z)(e))};function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=e=>{var t,r,n,i=e.content||[],o={type:"news_and_news_article",textMsg:"",cardTitle:"",cardSource:{name:"",icon:""},cardList:[],promptHint:(null==(t=e.extra)?void 0:t.promptHint)||[],traceId:e.traceID,replaceList:[]};return i.forEach(e=>{if("news"===e.type){o.textMsg=e.text,o.cardTitle="\u4E3A\u4F60\u63A8\u8350",o.cardList=e.cardList,o.cardSource=e.xSource;return}if("news_article"===e.type){o.textMsg=e.text,o.cardTitle="\u4E3A\u4F60\u63A8\u8350",o.cardList=[e.card],o.cardSource=e.xSource;return}}),null!=(r=e.extra)&&r.replaces&&(o.replaceList=e.extra.replaces||[]),null!=(n=e.extra)&&n.marks&&(o.markList=e.extra.marks),d(d({},o),(0,l.z)(e))},y=function(e){return e.EnumButtonIdCopy="copyButton",e.EnumButtonIdCollect="collectButton",e.EnumButtonIdShare="shareButton",e.EnumButtonIdLike="likeButton",e.EnumButtonIdUnlike="unlikeButton",e.EnumButtonIdPlay="playButton",e.EnumButtonIdRepeat="repeatButton",e.EnumButtonIdModify="modifyButton",e}({}),g=function(e){return e.walking="\u6B65\u884C",e.bicycling="\u9A91\u884C",e.driving="\u9A7E\u8F66",e.transit="\u516C\u4EA4",e}({});function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=e=>{var{steps:t,isYuanQi:r,middleMessagesInfo:i,stepKeepOnTop:o,waiting:a,waits:l,docPercentText:c}=e,u=t[t.length-1],s=r&&!(null!=u&&u.scene)?n.dZ.YUAN_QI:null==u?void 0:u.scene,p="";s&&u&&(p=u.msg);var f=l[l.length-1],d="";return f&&(d=f.msg),a&&d&&(p=d),c&&d&&(p=d),{type:"step",msg:p,scene:s,iconType:null==u?void 0:u.iconType,process:null!=u&&u.process?b(b({},null==u?void 0:u.process),{},{toolCallType:u.toolCallType||"",name:u.name||""}):void 0,middleMessages:i,stepKeepOnTop:o,docPercentText:c}};function O(e){var t,r,n,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isLoading:s=!1,isYuanQi:p=!1}=u,f=e.content||[],d={steps:f.filter(e=>"step"===e.type),texts:f.filter(e=>"text"===e.type),waits:f.filter(e=>"continue_step"===e.type),docPercents:f.filter(e=>"doc_percent"===e.type),searchGuids:f.filter(e=>"searchGuid"===e.type),yuanqiToolCall:f.filter(e=>"yuanqi_tool_call"===e.type),middleMessages:f.filter(e=>"middle_message"===e.type),middleMessagesList:f.filter(e=>"middle_messages"===e.type),replaceImageProgressList:f.filter(e=>"progress"===e.type)||[]},{steps:m,texts:y,waits:g,docPercents:v}=d,O=v.length>0?v[v.length-1].content:"",j=(null==(n=f[f.length-1])?void 0:n.type)==="progress",P=f[f.length-1],_=(null==P?void 0:P.type)==="continue_step"?P:null,E=function(e){if(0===e.length)return null;var t=e[e.length-1];return{title:t.title,list:t.docs||[],topic:t.topic}}(d.searchGuids),I=m.some(e=>!!(null!=e&&e.top))&&!E,S=(t=d.middleMessagesList,r=d.middleMessages,t.length>0?t[0]:{type:"middle_message",middleMessages:r||[]}),w=Math.floor(100*((null==(i=d.replaceImageProgressList[d.replaceImageProgressList.length-1])?void 0:i.value)||0)),T=y.reduce((e,t)=>e.concat(t.msg||""),"");if(!T&&s)return h({steps:m,isYuanQi:p,middleMessagesInfo:S,stepKeepOnTop:I,waiting:_,waits:g,docPercentText:O});var x=(null==P?void 0:P.type)==="step"&&null!=P&&P.top?h({steps:m,isYuanQi:p,middleMessagesInfo:S,stepKeepOnTop:I,waiting:_,waits:g,docPercentText:O}):void 0;return function(e,t,r,n,i,u,s,p,f,d,m){var y,{extra:g,isBanned:v}=t,{yuanqiToolCall:h,steps:O}=r;return b(b({type:"text",msg:e?(0,o.H)(e):a.a,showEmptyMsg:!e,prompts:g&&g.prompts||[],stopGenerate:null==g?void 0:g.stopGenerate,toolCalls:g&&g.toolCalls||[],usage:g?g.usage:null,plugins:[],searchRef:n,waiting:i?{msg:i.msg,iconType:i.iconType}:null,guideId:g&&g.guideId||0,unSupportRepeat:!!t.unSupportRepeat,promptHint:(null==g?void 0:g.promptHint)||[],yuanqiToolCall:null==h?void 0:h[0],middleMessages:u,showStepInfo:s,stepKeepOnTop:p,topPushedAiTaskCard:null==(y=(0,c.is)(t.content||[]))?void 0:y[0],audioEvaluateResult:t.audioEvaluateResult,replaces:g&&g.replaces||[],marks:g&&g.marks||[],writingInfo:g?g.writingInfo:void 0,replaceImageProgress:null!=g&&g.replaces?f:void 0,replaceImageLoading:d,isBanned:v,docPercentText:m},(0,l.z)(t)),{},{steps:O})}(T,e,d,E,_,S,x,I,w,j,O)}var j="https://hunyuan-base-prod-1258344703.cos.ap-guangzhou.myqcloud.com/text2image/public/%E6%99%BA%E8%83%BD%E4%BD%93-%E7%99%BE%E5%8F%98AI%E5%A4%B4%E5%83%8F/%E5%8D%A0%E4%BD%8D%E5%9B%BE.png",P="https://xj-psd-1258344703.file.myqcloud.com/image%2Fhunyuan%2Fplayground%2Fimage-deleted.png";function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Array.from({length:e},(e,t)=>({type:"progress",value:0,idx:t}))},S=e=>{var t,r=e.content||[],{extra:n}=e,i={type:"image-group",imgList:I(r.find(e=>"drawWithSearchGuid"===e.type)?4:1),msg:"",toolCalls:n&&n.toolCalls||[],usage:n?n.usage:null,promptHint:(null==n?void 0:n.promptHint)||[],traceId:e.traceID,isAIImageSearch:!1,aiImageSearchResult:"",imageCount:0,inspirationImageList:[],externalImageList:[],aiImageTotal:0,realImageTotal:0,topPushedAiTaskCard:null==(t=(0,c.is)(r))?void 0:t[0]};r.forEach(e=>{if("image"===e.type){var{imageUrlHigh:t,imageUrlLow:r,idx:n=0,prompt:o,source:a,sourceUrl:l,width:c,height:u}=e,s={width:c,height:u,type:"success",imageUrlHigh:t===j?P:t,imageUrlLow:r===j?P:r,idx:n,prompt:o,source:a,sourceUrl:l};i.isAIImageSearch?"inspiration"===a?i.inspirationImageList[n]=s:"external"===a&&(i.externalImageList[n]=s):i.imgList[n]=s}else if("progress"===e.type){var p,{idx:f=0}=e;if((null==(p=i.imgList[f])?void 0:p.type)!=="progress")return;i.imgList[f].value=Number(e.value.toFixed(2))}else"searchGuid"===e.type&&(i.isAIImageSearch=!0,i.aiImageSearchResult=e.title,i.imageCount=e.count,i.aiImageTotal=e.aiImageTotal,i.realImageTotal=e.realImageTotal)});var o=r.findIndex(e=>"text"===e.type);return o>-1&&(i.msg=r.slice(o).reduce((e,t)=>"text"===t.type&&t.msg?e+=t.msg:e,""),i.imgList.forEach((e,t)=>{"progress"===e.type&&(i.imgList[t]={type:"fail",idx:t})}),i.inspirationImageList.forEach((e,t)=>{"progress"===e.type&&(i.imgList[t]={type:"fail",idx:t})}),i.externalImageList.forEach((e,t)=>{"progress"===e.type&&(i.imgList[t]={type:"fail",idx:t})})),E(E({},i),{},{imgList:i.imgList.slice(0,4)},(0,l.z)(e))};function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var x=(e,t)=>{var r,i,o=e.content||[],a=o.filter(e=>"step"===e.type||"continue_step"===e.type),u=o.filter(e=>"doc_percent"===e.type),s="";(null==u?void 0:u.length)>0&&(s=u[u.length-1].content);var p=a[a.length-1],f=p?p.msg:"",d=p?null==p?void 0:p.iconType:null,m=p?null==p?void 0:p.iconList:void 0,y=p?null==p?void 0:p.index:void 0,g=a.filter(e=>"step"===e.type&&1===e.stepVersion);p&&(i="continue_step"===p.type?n.dZ.DEFAULT:null!=t&&t.isYuanQi&&!p.scene?n.dZ.YUAN_QI:p.scene);var v=(0,c.S0)(o[0])?null==(r=(0,c.is)(o))?void 0:r[0]:null;return T(T({type:"step",msg:i?f:"",scene:i,iconType:d,docPercentText:s,iconList:m,index:y},(0,l.z)(e)),{},{topPushedAiTaskCard:v,status:null==p?void 0:p.status,subMsg:null==p?void 0:p.subMsg,stage:null==p?void 0:p.stage,enableStageLayer:null==p?void 0:p.enableStageLayer,stepVersion:null==p?void 0:p.stepVersion,stepChunks:g,enableFeatures:(null==p?void 0:p.enableFeatures)||[]})};function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function C(e){var t=e.content,r=t.filter(e=>"text"===e.type),n=t.filter(e=>"pdf"===e.type||"doc"===e.type||"txt"===e.type||"ppt"===e.type||"excel"===e.type||"file"===e.type||!e.type||"tencentDoc"===e.type||"code"===e.type),i=t.filter(e=>"image"===e.type),a=t.filter(e=>"link"===e.type),l=t.filter(e=>"audio"===e.type),c=t.filter(e=>"session"===e.type),u=t.filter(e=>"wxArticle"===e.type),s=t.filter(e=>"finderFeed"===e.type),p=t.filter(e=>"link_card"===e.type),f=t.filter(e=>"html_summary"===e.type),d=t.filter(e=>"wxMessageCard"===e.type),m=t.filter(e=>"meetingHost"===e.type),y=t.filter(e=>"imMsgCard"===e.type),g=r.reduce((e,t)=>e.concat(t.msg||""),"");return{type:"multimodal",msg:g?(0,o.H)(g):"",files:n.map(e=>{var t=e.type;return"tencentDoc"===e.type&&(t=e.docType),{mediaId:e.mediaId,type:"file",isTencentDoc:"tencentDoc"===e.type,mimeType:t,url:e.url,fileName:e.fileName,size:e.size,index:e.index,parsing:e.parsing,cacheKey:e.cacheKey}}),images:i.map(e=>{var{extraObjectType:t,extraObject:r}=function(e){var t=void 0,r=void 0;if("extra"in e&&"string"==typeof e.extra)try{var n,i,o,a,l=JSON.parse(e.extra);"material"in l&&null!=(n=l.material)&&null!=(n=n.location_infos)&&n.length&&null!=(i=l.material)&&i.name&&null!=(o=l.material)&&o.thumbnail_url&&null!=(a=l.material)&&a.type&&(t="imageMaterial",r=l)}catch(e){}return{extraObjectType:t,extraObject:r}}(e);return k(k({},e),{},{type:"image",url:e.url,width:e.width,height:e.height,extraObjectType:t,extraObject:r})}),audios:l.map(e=>({type:e.type,url:e.url})),wxArticleList:u?u.map(e=>{var{url:t,title:r}=e;return{url:t,title:r||t}}):void 0,wxFinderFeedList:s.map(e=>({exportId:e.exportId})),audioEvaluateResult:e.audioEvaluateResult,link:a.length>0?a[0]:null,sessions:c,linkCards:p,htmlSummaryCards:f,wxMsgCards:d,meetingCard:m,imMsgCards:y}}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function N(e,t){var r=e.content||[],n=r.filter(e=>"step"===e.type),i=r.filter(e=>"text"===e.type).reduce((e,t)=>e.concat(t.msg||""),"");if(!i&&n.length>0){var c=n[n.length-1];return A({type:"pdf_content_parse",content:{type:"step",msg:c.msg,status:c.status,estimated_time:c.estimated_time}},(0,l.z)(e))}var u=t?null==t?void 0:t.t(a.a):a.a;return A({type:"pdf_content_parse",content:{type:"text",msg:i?(0,o.H)(i):u,showEmptyMsg:!i}},(0,l.z)(e))}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isLoading:r=!1}=t,n=e.content||[],i=n.filter(e=>"step"===e.type),c=n.filter(e=>"text"===e.type),u=n.filter(e=>"plugin"===e.type),s=c.reduce((e,t)=>e.concat(t.msg||""),"");if(!s&&r){var p=i[i.length-1],f="";return null!=p&&p.scene&&(f=p.msg),R({type:"step",msg:f},(0,l.z)(e))}return R({type:"text",msg:s?(0,o.H)(s):a.a,showEmptyMsg:!s,plugins:u},(0,l.z)(e))}var G=r(7375);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var U=e=>{var t,r,i,a,c,u=e.content||[],s=e.speechType===n.Fm.SEARCH_DEEP_MODE_FIN,p={type:s?"ai_search_pro_fin":"ai_search_pro",searchTitle:"",searchRefList:[],textMsg:"",cardTitle:"",cardSource:{name:"",icon:""},dividerLine:!1,dividerText:"",currentChunkType:"normal",dividerContent:[],cardList:[],components:[],outline:[],timeline:[],outlineStep:-1,relevantEvents:[],relevantEntities:[],mindMapUrl:"",promptHint:(null==(t=e.extra)?void 0:t.promptHint)||[],mindMapStatus:"none",botPrompt:"",entranceIndex:0,steps:[],currentStep:{type:"step",msg:"",scene:n.dZ.AI_SEARCH_PRO,name:"\u6B63\u5728\u641C\u7D22\u4E2D...",detailInfo:"",index:0},replaceList:[],markList:[],searchTopic:"",textBlockMsgs:[]};return u.forEach(e=>{switch(e.type){case"step":p.currentStep=e,p.currentChunkType="step";break;case"components":try{if(u.find(e=>"dividerLine"===e.type)){var t,r=null==e||null==(t=e.list)?void 0:t.findIndex(e=>"text"===e.type),n=e.list.find(e=>"dividerLine"===e.type);-1===r||n||e.list.splice(r+1,0,{type:"dividerLine",title:{content:"\u76F8\u5173\u95EE\u7B54",from:"dividerLine"}})}}catch(e){}!function(e){var t;for(var r of(s&&null!=(t=e.list)&&t.length&&e.list.forEach(e=>{"text"===e.type&&(e.type="textBlock")}),p.components=e.list||[],p.currentChunkType="components",e.list||[]))if("step"===r.type){p.steps=r.steps;return}}(e);break;case"mindmap":!function(e){p.mindMapUrl=e.url,p.mindMapHighUrl=e.urlHigh,p.mindMapStatus=e.status,p.outlineStep=p.outline.length,p.currentChunkType="mindmap"}(e);break;case"searchGuid":!function(e){if(p.dividerLine){p.searchRefList=p.searchRefList.concat(e.docs||[]),p.searchTitle=e.title;return}p.searchTitle=e.title,p.searchRefList=e.docs,p.hitDeepMode=e.hitDeepMode,p.botPrompt=e.botPrompt,p.entranceIndex=e.entranceIndex,p.currentChunkType="searchGuid",p.searchTopic=e.topic,p.subTitle=e.subTitle,p.footnote=e.footnote}(e);break;case"card":!function(e){p.cardList=e.cardList,p.cardSource=e.xSource,p.outlineStep=p.outline.length,p.currentChunkType="card"}(e);break;case"text":s?function(e){if(p.currentChunkType="text",e.componentId)if(e.label){var t,r,n,i=null==(r=p.textBlockMsgs)?void 0:r.find(t=>t.componentId===e.componentId);i?(0,G.A)(i.content)&&i.content.push({label:e.label,content:e.msg||""}):null==(n=p.textBlockMsgs)||n.push({componentId:e.componentId,content:[{label:e.label,content:e.msg||""}]})}else null==(t=p.textBlockMsgs)||t.push({componentId:e.componentId,content:e.msg||""});else p.textMsg+=e.msg||""}(e):p.dividerLine?function(e){if(e.isTitle)return p.dividerContent.push({title:e.msg||"",content:""});p.dividerContent.length&&(p.dividerContent[p.dividerContent.length-1].content+=e.msg)}(e):function(e){p.textMsg+=e.msg||"",p.currentChunkType="text",e.isTitle&&(p.outlineStep+=1)}(e);break;case"timeline":p.timeline=e.timelineList,p.outlineStep=p.outline.length,p.currentChunkType="timeline";break;case"outline":p.outline=e.outlineList||[],p.currentChunkType="outline";break;case"relevantEvents":p.relevantEvents=e.entityList,p.outlineStep=p.outline.length,p.currentChunkType="relevantEvents";break;case"relevantEntities":p.relevantEntities=e.entityList,p.outlineStep=p.outline.length,p.currentChunkType="relevantEntities";break;case"dividerLine":p.dividerLine=!0,p.dividerText=e.dividerText,p.outlineStep=p.outline.length,p.currentChunkType="dividerLine";break;case"companyInfo":p.companyInfo=e.companyInfo,p.currentChunkType="companyInfo"}}),p.textMsg&&(p.textMsg=(0,o.H)(p.textMsg)),null!=(r=e.extra)&&r.replaces&&(p.replaceList=(null==(a=e.extra)?void 0:a.replaces)||[]),null!=(i=e.extra)&&i.marks&&(p.markList=(null==(c=e.extra)?void 0:c.marks)||[]),B(B({},p),(0,l.z)(e))};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function V(e){var t,r,n,i=e.content||[],o=null,a=[];i.forEach(e=>{if("components"===e.type&&e.list.forEach(e=>{a.push({id:e.componentId,title:{type:e.type,content:e.title.content,form:e.title.form},content:[]})}),"continue_step"===e.type&&(o={msg:e.msg,iconType:e.iconType}),"text"===e.type){var t=a.find(t=>t.id===e.componentId);t&&(o=null,t.content.push({msg:e.msg||"",type:e.type,isTitle:e.isTitle}))}});var c=[];return a.forEach(e=>{e.content.length>0&&c.push(e)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:"doc_deep_reading",container:c,promptHint:(null==(t=e.extra)?void 0:t.promptHint)||[],replaces:(null==(r=e.extra)?void 0:r.replaces)||[],marks:(null==(n=e.extra)?void 0:n.marks)||[],waiting:o},(0,l.z)(e))}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){var t,r,n=null==(t=e.content)?void 0:t[0],i=null==n?void 0:n.text;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:"doc_deep_read_card",card:{intro:i,title:null==n?void 0:n.title},itemList:null==(r=e.extra)?void 0:r.docDeepReadCardItemList},(0,l.z)(e))}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function J(e){var t,{extra:r}=e,n=e.content.filter(e=>"writingOutline"===e.type),i="",o="doc",a={chapter:{}};if(n.forEach(e=>{var t,r,n;i+=e.msg,null!=(t=e.extend)&&t.fileType&&(o=null==(n=e.extend)?void 0:n.fileType),a.chapter=X(X({},a.chapter),(null==(r=e.extend)?void 0:r.chapter)||{})}),null!=(t=e.extra)&&t.writingInfo&&(o=e.extra.writingInfo.fileType,e.extra.writingInfo.outline)){var c=JSON.parse(e.extra.writingInfo.outline),u={};c.forEach(e=>{var t=function(e){var t={};if(!e.children||0===e.children.length)return t;var r=[];for(e.children.forEach((e,t)=>{r.push({node:e,pos:"".concat(t+1)})});r.length>0;){var n=r.shift();if(n.node.wordCount&&(t[n.pos]={wordCount:n.node.wordCount}),n.node.children&&n.node.children.length>0)for(var i=n.node.children.length-1;i>=0;i--){var o=n.node.children[i];r.unshift({node:o,pos:"".concat(n.pos,"-").concat(i+1)})}}return t}(e);u=X(X({},u),t)}),a.chapter=u}var s=e.content.filter(e=>"searchGuid"===e.type),p=null;if(s.length>0){var f=s[s.length-1];p={title:f.title,list:f.docs||[],topic:f.topic}}return r&&(a.writingInfo=r.writingInfo),X({type:"outline",value:i,outlineType:o,outlineConfig:a,promptHint:(null==r?void 0:r.promptHint)||[],writingInfo:r?r.writingInfo:void 0,searchRef:p},(0,l.z)(e))}var Q=function(e){return e[e.writing=2]="writing",e[e.error=1]="error",e[e.done=0]="done",e}({});function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Z(e){var t=e.content[0];return t?$($({},t),{},{type:"tx_doc_card"},(0,l.z)(e)):$({type:"tx_doc_card",fileName:"\u672A\u77E5\u9519\u8BEF",fileType:"unknown",status:Q.error},(0,l.z)(e))}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et(e){var t,r,n,i=e.content||[],o=null,a=null,c="",u=[];return i.forEach(e=>{if("thinkDeep"===e.type||"step"===e.type){var t;o=e,null!=(t=e.thinkDeepSections)&&t.length&&e.thinkDeepSections.forEach(e=>{var t;null!=(t=e.ref_docs)&&t.length&&(u=[...u,...e.ref_docs])})}"text"===e.type&&(c+=e.msg||""),"card"===e.type&&(a=e)}),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:"deep_think_box",thinkDeepInfo:o,msg:c,cardInfo:a,promptHint:(null==(t=e.extra)?void 0:t.promptHint)||[],replaces:(null==(r=e.extra)?void 0:r.replaces)||[],marks:(null==(n=e.extra)?void 0:n.marks)||[],refList:u},(0,l.z)(e))}function er(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function en(e){var t,r,n,i,o,a,u,s=e.content.filter(e=>"searchGuid"===e.type),p=e.content.filter(e=>"think"===e.type),f=e.content.filter(e=>"text"===e.type),d=e.content.filter(e=>"doc_percent"===e.type),m="";(null==d?void 0:d.length)>0&&(m=d[d.length-1].content);var y=e.content.filter(e=>"progress"===e.type)||[],g=Math.floor(100*((null==(t=y[y.length-1])?void 0:t.value)||0)),v=(null==(r=e.content[e.content.length-1])?void 0:r.type)==="progress",b=null;s.length>0&&(b={title:s[0].title,list:s[0].docs,topic:s[0].topic,citations:(null==(u=s[0])?void 0:u.citations)||void 0});var h=null;if(p.length>0){var O=p.map(e=>e.content).join("");/[^\n\s]/.test(O)||(O=""),h={title:p[p.length-1].title,iconType:p[p.length-1].iconType,content:O}}return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?er(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):er(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:"reasoner",searchRef:b,think:h,text:f.map(e=>e.msg).join(""),replaceList:(null==(n=e.extra)?void 0:n.replaces)||[],markList:(null==(i=e.extra)?void 0:i.marks)||[],docPercentText:m,topPushedAiTaskCard:null==(o=(0,c.is)(e.content))?void 0:o[0],replaceImageProgress:null!=(a=e.extra)&&a.replaces?g:void 0,replaceImageLoading:v},(0,l.z)(e))}var ei=e=>({type:n.Fm.ACCESS,data:e.content[e.content.length-1]}),eo=function(e){return e[e.SEARCH=1]="SEARCH",e[e.QUERY=2]="QUERY",e[e.CODE=3]="CODE",e[e.PLATE_TEXT=4]="PLATE_TEXT",e[e.LOADING=5]="LOADING",e}({}),ea=["query"];function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ec=new Set(["google_web_search","paper_search","hunyuan_web_search","flight_ticket_search","hotel_search","train_ticket_search"]),eu=new Set(["google_web_search","paper_search","hunyuan_web_search"]);function es(e){var t,r,i=e.content.filter(e=>"deepSearch"===e.type),o=e.content.filter(e=>"searchGuid"===e.type),a=e.content.filter(e=>"text"===e.type),c=e.content.filter(e=>"step"===e.type),u={type:"deepSearch",title:"",iconType:7,contents:[]},s=u.contents[u.contents.length-1];i.forEach(e=>{u.title=e.title,u.iconType=e.iconType,e.contents&&e.contents.forEach(e=>{var t=function(e){if("text"===e.type)return{type:"text",msg:e.msg,$chunk:e,componentId:e.componentId};if("toolCall"!==e.type)return null;var t,r,n,i,o,a,l,c,u=(null==e||null==(c=e.style)?void 0:c.templateId)||0;return u===eo.LOADING?{type:"loading",query:"",msg:"",state:e.state,$chunk:e,toolCallName:e.toolCallName,componentId:e.componentId}:(t=e.toolCallName,u!==eo.CODE&&(u||"code"!==t))?(i=e.toolCallName,o=[eo.SEARCH,eo.QUERY].includes(u),a=!u&&i&&ec.has(i),o||a)?{type:"search",state:e.state,query:0===e.state?e.title:"",msg:2===e.state?e.msg:"",docs:(null==e?void 0:e.docs)||[],countTitle:2===e.state?e.title:"",style:null==e?void 0:e.style,$chunk:e,baseSearch:(l=e.toolCallName,1===u||!u&&void 0!==l&&eu.has(l)),toolCallName:e.toolCallName,componentId:e.componentId}:u===eo.PLATE_TEXT?{type:"plate_text",state:e.state,style:null==e?void 0:e.style,toolCallName:e.toolCallName,$chunk:e,docs:(null==e?void 0:e.docs)||[],query:2===e.state?e.title:"",msg:2===e.state?e.msg:"",componentId:e.componentId}:"image_parse"===e.toolCallName?{type:"img",state:e.state,query:0===e.state?e.title:"",msg:"",docs:e.docs||[],style:null==e?void 0:e.style,$chunk:e,toolCallName:e.toolCallName,componentId:e.componentId}:"extract_excel_content"===e.toolCallName?{type:"excel",state:e.state,query:0===e.state?e.title:"",msg:"",docs:e.docs||[],style:null==e?void 0:e.style,$chunk:e,toolCallName:e.toolCallName,componentId:e.componentId}:{type:"default",state:e.state,query:0===e.state?e.msg:"",msg:2===e.state?e.msg:"",$chunk:e,toolCallName:e.toolCallName,componentId:e.componentId}:{type:"code",state:e.state,query:e.title,msg:0===e.state?(null==e||null==(r=e.extra)?void 0:r.code)||"":(null==e||null==(n=e.extra)?void 0:n.codeResult)||"",$chunk:e,style:null==e?void 0:e.style,toolCallName:e.toolCallName,componentId:e.componentId}}(e);if(t){if(!s||t.type!==s.type||"code"===t.type||"plate_text"===t.type){u.contents.push(t),s=t;return}if("text"===t.type){s.msg+=t.msg;return}var{query:r}=t,n=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,ea);Object.assign(s,n)}})});var p=null;o.length>0&&(p={title:o[0].title,list:o[0].docs,topic:o[0].topic,enableFeatures:o[0].enableFeatures});var f=a.map(e=>e.msg).join(""),d=null;return c.length>0&&!p&&(d=x({speechType:n.Fm.STATUS,content:c})),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({type:"deep_search",deepSearch:u,searchGuid:p,text:f,step:d,replaceList:(null==(t=e.extra)?void 0:t.replaces)||[],markList:(null==(r=e.extra)?void 0:r.marks)||[]},(0,l.z)(e))}function ep(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ep(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ep(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ed=e=>{var t,r,{content:i}=e,o=ef(ef({traceId:e.traceID},e),{},{type:n.Fm.MEETING_BOT,replaceList:[],markList:[],content:[]}),a="";return i.forEach(e=>{if("guide"===e.type){o.guide={text:e.text,iconType:e.iconType};return}if("taskFile"===e.type){o.fileList={title:e.title,taskScene:e.taskScene,taskId:e.taskId,startTime:e.startTime,endTime:e.endTime,multimedias:e.multimedias};return}if("taskCard"===e.type){a&&(o.content.push({type:"text",msg:a}),a=""),o.content.push({type:"taskCard",taskStatus:e.taskStatus,taskScene:e.taskScene,title:e.title,taskId:e.taskId,startTime:e.startTime,endTime:e.endTime,taskUrl:e.taskUrl,meetingToken:e.meetingToken});return}if((0,c.S0)(e)){a&&(o.content.push({type:"text",msg:a}),a=""),o.content.push(e);return}"text"===e.type&&(a+=e.msg||""),"jumpNotice"===e.type&&(o.jumpNotice={projectId:e.projectId,cid:e.cid,text:e.text})}),a&&o.content.push({type:"text",msg:a}),null!=(t=e.extra)&&null!=(t=t.replaces)&&t.length&&(o.replaceList=e.extra.replaces),null!=(r=e.extra)&&null!=(r=r.marks)&&r.length&&(o.markList=e.extra.marks),o},em=e=>{var t,r,{traceID:i,content:o}=e,a={type:n.Fm.AI_TASK_BOT,content:[],replaceList:[],traceId:i,isPushTask:!1},l="";return o.forEach(e=>{if((0,c.S0)(e)){l&&(a.content.push({type:"text",msg:l}),l="");var t,r,n=null==(t=(0,c.is)([e]))?void 0:t[0];a.content.push(n),a.isPushTask=(null==n||null==(r=n.extensions)?void 0:r.isPushTask)||!1;return}"text"===e.type&&(l+=e.msg)}),l&&a.content.push({type:"text",msg:l}),null!=(t=e.extra)&&null!=(t=t.replaces)&&t.length&&(a.replaceList=e.extra.replaces),null!=(r=e.extra)&&null!=(r=r.marks)&&r.length&&(a.markList=e.extra.marks),a}},91117:(e,t,r)=>{r.d(t,{l:()=>c,z:()=>l});var n=r(53239),i=r(23260);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var n,i,o;n=e,i=t,o=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l=(0,n.createContext)(null);function c(e){return function(){var t=(0,n.useContext)(l),r=(0,n.useMemo)(()=>{if(!t&&e){var r=(0,i.vZ)(e),n=(0,i.kp)(e);return a(a({},r),n)}return null},[t,e]);if(t)return t;if(r)return r;throw Error("useJotaiChatContext must be used within a JotaiChatProvider or provide a chatAtom")}}}}]);
//# sourceMappingURL=yb_v2_yb-chat.2138a0706bd2d053.js.map